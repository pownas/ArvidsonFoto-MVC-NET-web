@using ArvidsonFoto.Core.Models
@using ArvidsonFoto.Core.Interfaces
@model UploadImageInputDto
@inject IApiCategoryService _categoryService

@{
    string imgThumbSrc = Model.ImageUrlFullSrc + ".thumb.jpg";

    var selectedCategory = _categoryService.GetById(Model.ImageArt);
}

<form method="post" asp-controller="UploadAdmin" asp-action="@(nameof(UploadAdminController.EditImageLink))">
    <div class="modal-body">
        <p class="text-center"><img src="@imgThumbSrc" alt="@Model.ImageArtNamn" width="120" height="120" title="@Model.ImageArtNamn"></p>

        @Html.AntiForgeryToken()
        <div id="validationSummary" asp-validation-summary="All" class="text-danger"></div>
        <div class="form-group">
            <input asp-for="ImageHuvudfamilj" hidden />
            <input asp-for="ImageFamilj" hidden />
            <input asp-for="ImageArt" hidden />
            <input asp-for="ImageId" hidden />
            <p><strong>Bildnummer:</strong> @Model.ImageId</p>
            <p><strong>Art:</strong> @Model.ImageArtNamn</p>
            <p class="m-0">Är det fel art?</p>
            <p>Då behöver du <a title="Radera" class="text-danger" data-bs-toggle="modal" data-bs-target="#DeleteImage-@Model.ImageId">Radera</a> och göra en ny länkning.</p>
        </div>
        <div class="form-group">
            <label asp-for="ImageUrl" class="control-label"></label>
            <div>
                <input asp-for="ImageUrl" placeholder="Filnamnet UTAN .jpg, t.ex: 'TA1_1234'" class="form-control" />
                <span asp-validation-for="ImageUrl"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="ImageDate" class="control-label"></label>
            <div>
                <input asp-for="ImageDate" value="@Model.ImageDate.ToString("yyyy-MM-dd")" type="date" placeholder="ÅÅÅÅ-MM-DD" class="form-control" />
                <span asp-validation-for="ImageDate"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="ImageDescription" class="control-label"></label>
            <div>
                <input asp-for="ImageDescription" value="@Model.ImageDescription" class="form-control" />
                <span asp-validation-for="ImageDescription"></span>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Avbryt <i class="bi bi-x-circle"></i>
        </button>
        <button id="SubmitButton" type="submit" class="btn btn-primary text-white">
            Spara ändring <i class="bi bi-pencil-square"></i>
        </button>
    </div>
</form>